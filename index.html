<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cassette</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#18120e;
  --panel:#2b2019;
  --panel-dark:#221912;
  --accent:#c58a2b;
  --label:#efe4d2;
  --text:#f3eee6;
}

*{margin:0;padding:0;box-sizing:border-box}

body{
  background:radial-gradient(circle at top,#2a1f18,#140f0c 70%);
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  font-family:Inter,sans-serif;
  color:var(--text);
}

.cassette{
  width:min(440px,92vw);
  background:linear-gradient(145deg,var(--panel),var(--panel-dark));
  border-radius:18px;
  padding:26px;
  box-shadow:
    inset 0 4px 8px rgba(255,255,255,0.05),
    inset 0 -8px 16px rgba(0,0,0,0.6),
    0 30px 60px rgba(0,0,0,0.8);
}

.label{
  background:var(--label);
  color:#1a140f;
  padding:8px 14px;
  font-family:"IBM Plex Mono",monospace;
  font-size:12px;
  border-radius:4px;
  margin-bottom:16px;
  text-align:center;
  letter-spacing:1px;
}

.window{
  background:#0f0b09;
  border-radius:12px;
  height:130px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:20px;
  position:relative;
  margin-bottom:20px;
}

.ribbon{
  position:absolute;
  height:3px;
  background:var(--accent);
  left:15%;
  right:15%;
  top:50%;
  transform:translateY(-50%);
  opacity:0.6;
}

.reel{
  width:80px;height:80px;
  border-radius:50%;
  border:2px solid var(--accent);
  display:flex;
  align-items:center;
  justify-content:center;
  transition:transform .2s linear;
}

.teeth{
  width:70%;height:70%;
  border-radius:50%;
  border:6px dashed var(--accent);
}

.rotating{
  animation:spin 3s linear infinite;
}

@keyframes spin{
  from{transform:rotate(0)}
  to{transform:rotate(360deg)}
}

.meta{
  text-align:center;
  margin-bottom:12px;
}

.controls{
  display:flex;
  justify-content:center;
  gap:16px;
  margin-bottom:10px;
}

button{
  background:var(--accent);
  border:none;
  padding:8px 14px;
  font-family:"IBM Plex Mono",monospace;
  cursor:pointer;
}

.tracklist{
  max-height:120px;
  overflow:auto;
  font-size:13px;
  opacity:.8;
  text-align:center;
}
.tracklist div{
  cursor:pointer;
  padding:3px;
}
.tracklist div:hover{
  color:var(--accent);
}
</style>
</head>

<body>

<div class="cassette">

  <div class="label">SIDE A — FOR RIYA</div>

  <div class="window">
    <div class="reel" id="leftReel"><div class="teeth"></div></div>
    <div class="ribbon"></div>
    <div class="reel" id="rightReel"><div class="teeth"></div></div>
  </div>

  <div class="meta" id="trackMeta"></div>

  <div class="controls">
    <button onclick="prevTrack()">PREV</button>
    <button onclick="togglePlay()" id="playBtn">PLAY</button>
    <button onclick="nextTrack()">NEXT</button>
  </div>

  <div class="tracklist" id="trackList"></div>

</div>

<audio id="audio" preload="auto"></audio>
<audio id="hiss" src="sounds/hiss.mp3"></audio>

<script>
const playlist = [
 {title:"we're fucked, it's fine",src:"songs/we're fucked, it's fine.mp3"},
 {title:"Stay Down",src:"songs/Stay Down.mp3"},
 {title:"Annie's Song",src:"songs/Annie's Song.mp3"},
 {title:"By Your Side",src:"songs/By Your Side.mp3"},
 {title:"Afterthought",src:"songs/Afterthought.mp3"},
 {title:"Kaleji",src:"songs/Kaleji.mp3"},
 {title:"Gravity",src:"songs/Gravity.mp3"},
 {title:"Slide",src:"songs/Slide.mp3"},
 {title:"Backseat",src:"songs/Backseat.mp3"},
 {title:"Maybe So",src:"songs/Maybe So.mp3"}
];

let index = 0;
let playing = false;
let reelAnimation;

const audio = document.getElementById("audio");
const meta = document.getElementById("trackMeta");
const playBtn = document.getElementById("playBtn");
const leftReel = document.getElementById("leftReel");
const rightReel = document.getElementById("rightReel");

function loadTrack(i){
  audio.src = encodeURI(playlist[i].src);
  audio.load();
  meta.textContent = "Track " + String(i+1).padStart(2,"0") + " — " + playlist[i].title;
}

function buildTrackList(){
  const container = document.getElementById("trackList");
  playlist.forEach((track,i)=>{
    const div = document.createElement("div");
    div.textContent = (i+1)+". "+track.title;
    div.onclick = ()=>{
      index=i;
      loadTrack(index);
      if(playing) audio.play();
    };
    container.appendChild(div);
  });
}

function togglePlay(){
  if(!playing){
    playing=true;
    playBtn.textContent="PAUSE";
    audio.play();
    leftReel.classList.add("rotating");
    rightReel.classList.add("rotating");
    animateReels();
  }else{
    playing=false;
    playBtn.textContent="PLAY";
    audio.pause();
    leftReel.classList.remove("rotating");
    rightReel.classList.remove("rotating");
    cancelAnimationFrame(reelAnimation);
  }
}

function nextTrack(){
  if(index<playlist.length-1){
    index++;
    loadTrack(index);
    if(playing) audio.play();
  }
}

function prevTrack(){
  if(index>0){
    index--;
    loadTrack(index);
    if(playing) audio.play();
  }
}

audio.addEventListener("ended",nextTrack);

function animateReels(){
  if(!playing) return;

  if(audio.duration){
    const progress = audio.currentTime / audio.duration;
    leftReel.style.transform = `scale(${1-progress*0.3})`;
    rightReel.style.transform = `scale(${0.7+progress*0.3})`;
  }

  reelAnimation = requestAnimationFrame(animateReels);
}

loadTrack(index);
buildTrackList();
</script>

</body>
</html>
